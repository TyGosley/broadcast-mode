@import "tailwindcss";
@config "../tailwind.config.ts";

html,
body {
  height: 100%;
}

body {
  background:
    radial-gradient(1200px 600px at 20% 10%, rgba(34, 211, 238, 0.18), transparent 60%),
    radial-gradient(900px 500px at 80% 20%, rgba(217, 70, 239, 0.16), transparent 60%),
    radial-gradient(900px 700px at 60% 90%, rgba(168, 85, 247, 0.14), transparent 60%),
    #05040a;

  color: white;
}

/* -----------------------------
   Broadcast Overlay (VHS layer)
   ----------------------------- */

[data-broadcast] {
  /* Subtle vignette + glassy tint */
  background:
    radial-gradient(1200px 800px at 50% 35%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.35) 100%),
    linear-gradient(to bottom, rgba(0, 255, 255, 0.02), rgba(255, 0, 255, 0.02));
  opacity: 0.95;
  mix-blend-mode: normal;
}

/* Scanlines */
[data-broadcast]::before {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(to bottom,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.05) 1px,
      rgba(0, 0, 0, 0) 3px,
      rgba(0, 0, 0, 0) 6px);
  opacity: 0.06;
}

/* Noise grain (animated) */
[data-broadcast]::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  opacity: 0.07;
  transform: translate3d(0, 0, 0);
  animation: broadcast-noise 1.1s steps(2, end) infinite;
}

/* Flicker easter egg (Shift+B) */
[data-broadcast][data-flicker="true"] {
  animation: broadcast-flicker 0.65s ease-in-out;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  [data-broadcast]::after {
    animation: none;
  }

  [data-broadcast][data-flicker="true"] {
    animation: none;
  }
}

@keyframes broadcast-noise {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
  }

  20% {
    transform: translate3d(-2%, 1%, 0) scale(1.02);
  }

  40% {
    transform: translate3d(1%, -2%, 0) scale(1.01);
  }

  60% {
    transform: translate3d(2%, 1%, 0) scale(1.02);
  }

  80% {
    transform: translate3d(-1%, 2%, 0) scale(1.01);
  }

  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes broadcast-flicker {
  0% {
    opacity: 0.35;
    filter: brightness(1.15) contrast(1.05);
  }

  35% {
    opacity: 1;
    filter: brightness(0.95) contrast(1.1);
  }

  70% {
    opacity: 0.6;
    filter: brightness(1.2) contrast(1.0);
  }

  100% {
    opacity: 0.95;
    filter: none;
  }
}